<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
>
<head>
    <meta charset="UTF-8">
    <title th:text="#{title.management.user}"></title>
    <th:block th:replace="~{fragment/general :: headerfiles}"/>
</head>
<body>
<div class="container" sec:authorize="hasAuthority('VIEW_USER_LIST')">
    <header th:insert="~{fragment/general :: header}"></header>
    <div><h4 th:text="#{title.user.list}"></h4></div>
    <div class="d-flex w-100 justify-content-end">
        <a class="btn btn-primary my-2" th:href="@{/client/create}">
            <i class="bi bi-plus"></i> Create new</a>
    </div>
    <div th:replace="~{fragment/general :: message}"></div>
    <table class="table table-striped table-bordered table-responsive">
        <thead class="thead-dark">
        <tr>
            <th>#</th>
            <th th:text="#{title.user.username}"></th>
            <th th:text="#{title.user.encodedPassword}"></th>
            <th th:text="#{title.user.accountEnabled}"></th>
            <th th:text="#{title.user.accountLocked}"></th>
            <th th:text="#{title.user.accountExpired}"></th>
            <th th:text="#{title.user.credentialExpired}"></th>
            <th th:text="#{title.user.group}"></th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="user, iter: ${userList}">
            <td><span th:text="${iter.index + 1}"></span></td>
            <td><span th:text="${user.username}"></span></td>
            <td><span th:text="${user.password}"></span></td>
            <td><div class="form-check d-flex justify-content-center">
                <label class="form-check-label" for="enabled">
                    <input class="form-check-input" type="checkbox" th:checked="${user.enabled}"
                           id="enabled">
                </label>
            </div></td>
            <td><div class="form-check d-flex justify-content-center">
                <label class="form-check-label" for="account_locked">
                    <input class="form-check-input" type="checkbox" th:checked="${!user.accountNonLocked}"
                           id="account_locked">
                </label>
            </div></td>
            <td><div class="form-check d-flex justify-content-center">
                <label class="form-check-label" for="account_expired">
                    <input class="form-check-input" type="checkbox" th:checked="${!user.accountNonLocked}"
                           id="account_expired">
                </label>
            </div></td>
            <td><div class="form-check d-flex justify-content-center">
                <label class="form-check-label" for="credentials_expired">
                    <input class="form-check-input" type="checkbox" th:checked="${!user.credentialsNonExpired}"
                           id="credentials_expired">
                </label>
            </div></td>
            <td><div>
                <select class="form-select" size="2" multiple aria-label="multiple select">
                    <option th:each="group: ${groupList}" th:selected="${user.groupList.contains(group)}"
                            th:value="${group}" th:text="${group}"></option>
                </select>
            </div></td>
            <td>
<!--                <a th:href="@{'/client/update/' + ${client.clientId}}" class="btn btn-sm btn-warning d-inline-block">-->
<!--                    <i class="bi bi-pencil-fill"></i></a>-->
<!--                <form th:id="deleteForm + ${client.clientId}" class="d-inline-block" th:action="@{/client/delete}"-->
<!--                      th:method="POST">-->
<!--                    <label><input type="hidden" th:name="id" th:value="${client.clientId}"></label>-->
<!--                    <button type="button" th:data-thing="${client.clientId}"-->
<!--                            onclick="confirmDelete(this.getAttribute('data-thing'));"-->
<!--                            class="btn btn-sm btn-danger">-->
<!--                        <i class="bi bi-trash-fill"></i></button>-->
<!--                </form>-->
            </td>
        </tr>
        </tbody>
    </table>
    <div th:replace="~{fragment/general :: footer}"></div>
</div>
</body>
</html>